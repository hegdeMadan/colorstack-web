{"ast":null,"code":"import _objectSpread from \"/home/madan/Documents/workspace/artwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/madan/Documents/workspace/artwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/madan/Documents/workspace/artwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/madan/Documents/workspace/artwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/madan/Documents/workspace/artwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/madan/Documents/workspace/artwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/madan/Documents/workspace/artwork/src/components/projects/projectActs/PostCredits.js\";\nimport React, { Component } from 'react';\nimport { firestoreConnect } from 'react-redux-firebase';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport { createLike as _createLike, removeLike as _removeLike } from '../../../store/actions/LikeActions';\nimport { addCollection as _addCollection } from '../../../store/actions/AddToCollection';\n\nvar PostCerdits =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PostCerdits, _Component);\n\n  function PostCerdits() {\n    var _this;\n\n    _classCallCheck(this, PostCerdits);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PostCerdits).call(this));\n\n    _this.handleLike = function () {\n      var likes = _this.props.likeCount + 1;\n      var like = _this.props.like;\n      var likeObj = like && like[0] ? like[0] : null;\n      var isLiked = likeObj && likeObj.isLiked ? false : true;\n      console.log(\"like\", likeObj);\n      console.log(_this.props.project.id + \":\\n\" + isLiked);\n      isLiked ? _this.setState(function () {\n        return {\n          likeToPost: _this.props.project.id,\n          likeCount: likes - 2,\n          id: likeObj.id\n        };\n      }, function () {\n        console.log(_this.state);\n\n        _this.props.removeLike(_this.state);\n      }) : _this.setState(function () {\n        return {\n          likeToPost: _this.props.project.id,\n          likeCount: likes\n        };\n      }, function () {\n        _this.props.createLike(_this.state);\n      });\n    };\n\n    _this.addCollection = function () {\n      var collectedCount = _this.props.collected + 1;\n      var activeStatus = _this.props.isActive ? false : true;\n\n      _this.setState(function () {\n        return {\n          imageUrl: _this.props.project.imageUrl,\n          postId: _this.props.project.id,\n          activeStatus: activeStatus,\n          collectedCount: collectedCount\n        };\n      }, function () {\n        _this.props.addCollection(_this.state);\n      });\n    };\n\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(PostCerdits, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var db = firebase.firestore();\n      var ref = db.collection('projects').doc(this.props.project.id).collection('likes').where('likeFromId', '==', this.props.project.authorId);\n      return ref.get().then(function (documentSnapshots) {\n        documentSnapshots.forEach(function (doc) {\n          var obj = _objectSpread({}, doc.data());\n\n          console.log(\"doc: \", obj);\n        });\n      });\n    } // incrementing like to the post\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          likeCount = _this$props.likeCount,\n          auth = _this$props.auth,\n          like = _this$props.like;\n      var liked = like && like[0] ? like[0] : false; //  console.log(\"l:\", liked)\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"icons-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"post-act\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.handleLike,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, liked.isLiked ? React.createElement(\"i\", {\n        className: \"material-icons blue-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"thumb_up\") : React.createElement(\"i\", {\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"thumb_up\"))), React.createElement(\"span\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"send\")))), React.createElement(\"div\", {\n        className: \"save\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.addCollection,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons center\",\n        title: \"add to your collection\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"add_to_photos\"))))), likeCount ? React.createElement(\"div\", {\n        className: \"counts\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"like-count\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, likeCount, \" likes\")) : null);\n    }\n  }]);\n\n  return PostCerdits;\n}(Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    createLike: function createLike(like) {\n      return dispatch(_createLike(like));\n    },\n    removeLike: function removeLike(like) {\n      return dispatch(_removeLike(like));\n    },\n    addCollection: function addCollection(post) {\n      return dispatch(_addCollection(post));\n    }\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(PostCerdits);","map":{"version":3,"sources":["/home/madan/Documents/workspace/artwork/src/components/projects/projectActs/PostCredits.js"],"names":["React","Component","firestoreConnect","compose","connect","firebase","createLike","removeLike","addCollection","PostCerdits","handleLike","likes","props","likeCount","like","likeObj","isLiked","console","log","project","id","setState","likeToPost","state","collectedCount","collected","activeStatus","isActive","imageUrl","postId","db","firestore","ref","collection","doc","where","authorId","get","then","documentSnapshots","forEach","obj","data","auth","liked","mapDispatchToProps","dispatch","post"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { firestoreConnect } from 'react-redux-firebase'\nimport { compose } from 'redux'\nimport { connect } from 'react-redux'\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport { createLike, removeLike } from '../../../store/actions/LikeActions'\nimport { addCollection } from '../../../store/actions/AddToCollection'\n\nclass PostCerdits extends Component {\n  constructor() {\n    super()\n    this.state = {}\n  }\n\n  componentWillMount() {\n    const db = firebase.firestore()\n    const ref = db.collection('projects').doc(this.props.project.id)\n      .collection('likes')\n      .where('likeFromId', '==', this.props.project.authorId)\n\n    return ref.get().then((documentSnapshots) => {\n      documentSnapshots.forEach(doc => {\n        let obj = {\n          ...doc.data()\n        }\n        console.log(\"doc: \", obj)\n      })\n    })\n  }\n\n  // incrementing like to the post\n  handleLike = () => {\n    let likes = this.props.likeCount + 1\n    const like = this.props.like\n    const likeObj = like && like[0] ? like[0] : null\n\n    const isLiked = likeObj && likeObj.isLiked ? false : true\n    console.log(\"like\", likeObj)\n    console.log(this.props.project.id + \":\\n\" + isLiked)\n\n    isLiked\n    ? this.setState(() => {\n        return {\n          likeToPost: this.props.project.id,\n          likeCount: likes - 2,\n          id: likeObj.id\n        }\n      }, () => {\n        console.log(this.state)\n        this.props.removeLike(this.state)\n      })\n    : this.setState(() => {\n        return {\n          likeToPost: this.props.project.id,\n          likeCount: likes\n        }\n      }, () => {\n        this.props.createLike(this.state)\n      })\n  }\n\n  // adding post to user's collection\n  addCollection = () => {\n    let collectedCount = this.props.collected + 1\n    let activeStatus = this.props.isActive ? false : true\n\n    this.setState(() => {\n      return {\n        imageUrl: this.props.project.imageUrl,\n        postId: this.props.project.id,\n        activeStatus,\n        collectedCount\n      }\n    }, () => {\n      this.props.addCollection(this.state)\n    })\n  }\n\n  render() {\n    const { likeCount, auth, like } = this.props\n    const liked = like && like[0] ? like[0] : false\n    //  console.log(\"l:\", liked)\n    return(\n      <div>\n      <div className=\"icons-wrapper\">\n        <div className=\"post-act\">\n          <span className=\"\">\n            <button onClick={this.handleLike}>\n              {liked.isLiked\n                ? <i className=\"material-icons blue-text\">thumb_up</i>\n                : <i className=\"material-icons\">thumb_up</i>\n              }\n            </button>\n          </span>\n          <span className=\"\">\n            <button>\n              <i className=\"material-icons\">send</i>\n            </button>\n          </span>\n        </div>\n        <div className=\"save\">\n          <span className=\"\">\n            <button onClick={this.addCollection}>\n               <i className=\"material-icons center\"\n                    title=\"add to your collection\">\n                  add_to_photos\n                </i>\n            </button>\n          </span>\n        </div>\n      </div>\n\n          {likeCount\n            ?\n              <div className=\"counts\">\n                <span className=\"like-count\">\n                  {likeCount} likes\n                </span>\n              </div>\n            : null\n          }\n      </div>\n    )\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    createLike: (like) => dispatch(createLike(like)),\n    removeLike: (like) => dispatch(removeLike(like)),\n    addCollection: (post) => dispatch(addCollection(post))\n  }\n}\n\n\nexport default connect(null, mapDispatchToProps)(PostCerdits)\n"]},"metadata":{},"sourceType":"module"}
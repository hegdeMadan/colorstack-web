{"ast":null,"code":"import _objectSpread from \"/home/madan/Documents/workspace/artwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/madan/Documents/workspace/artwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/madan/Documents/workspace/artwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/madan/Documents/workspace/artwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/madan/Documents/workspace/artwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/madan/Documents/workspace/artwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/madan/Documents/workspace/artwork/src/components/projects/projectActs/PostCredits.js\";\nimport React, { Component } from 'react'; // import { firestoreConnect } from 'react-redux-firebase'\n// import { compose } from 'redux'\n\nimport { connect } from 'react-redux';\nimport { createLike as _createLike, removeLike as _removeLike, updateLike as _updateLike } from '../../../store/actions/LikeActions';\nimport { addCollection as _addCollection } from '../../../store/actions/AddToCollection';\nimport { getLikes, dataObj } from './../../../utils/getCreditData';\n\nvar PostCerdits =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PostCerdits, _Component);\n\n  function PostCerdits() {\n    var _this;\n\n    _classCallCheck(this, PostCerdits);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PostCerdits).call(this));\n\n    _this.handleLike = function (e) {\n      var likes = _this.props.likeCount;\n      var like = _this.state.like ? _this.state.like : null;\n      var isLiked = like && like.isActive ? true : false;\n      console.log(\"like state: \", like);\n      like ? isLiked ? _this.setState(function () {\n        return {\n          like: {\n            likeToPost: _this.props.project.id,\n            likeCount: likes,\n            id: like.id\n          }\n        };\n      }, function () {\n        console.log(_this.state.like);\n\n        _this.props.removeLike(_this.state.like);\n      }) : _this.setState(function () {\n        return {\n          like: {\n            likeToPost: _this.props.project.id,\n            likeCount: likes,\n            id: like.id,\n            isActive: true\n          }\n        };\n      }, function () {\n        _this.props.updateLike(_this.state.like);\n      }) : _this.setState(function () {\n        return {\n          like: {\n            likeToPost: _this.props.project.id,\n            likeCount: likes,\n            isActive: true\n          }\n        };\n      }, function () {\n        _this.props.createLike(_this.state.like);\n      });\n    };\n\n    _this.addCollection = function () {\n      var collectedCount = _this.props.collected + 1;\n      var activeStatus = _this.props.isActive ? false : true;\n\n      _this.setState(function () {\n        return {\n          imageUrl: _this.props.project.imageUrl,\n          postId: _this.props.project.id,\n          activeStatus: activeStatus,\n          collectedCount: collectedCount\n        };\n      }, function () {\n        _this.props.addCollection(_this.state);\n      });\n    };\n\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(PostCerdits, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount(props) {\n      var _this2 = this;\n\n      var projectId = this.props.project.id;\n      var authorId = this.props.auth.uid;\n      getLikes(projectId, authorId).then(function () {\n        _this2.setState({\n          like: _objectSpread({}, dataObj)\n        }, function () {\n          console.log(\"thisss: \", _this2.state.like);\n        });\n      });\n    } // incrementing like to the post\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var likeCount = this.props.likeCount;\n      var like = this.state.like;\n      var liked = like && like.isActive ? true : false; // console.log(\"state: \", this.state)\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"icons-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"post-act\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.handleLike,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, liked ? React.createElement(\"i\", {\n        className: \"material-icons blue-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"thumb_up\") : React.createElement(\"i\", {\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"thumb_up\"))), React.createElement(\"span\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"send\")))), React.createElement(\"div\", {\n        className: \"save\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.addCollection,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons center\",\n        title: \"add to your collection\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"add_to_photos\"))))), likeCount ? React.createElement(\"div\", {\n        className: \"counts\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"like-count\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, likeCount, \" likes\")) : null);\n    }\n  }]);\n\n  return PostCerdits;\n}(Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    createLike: function createLike(like) {\n      return dispatch(_createLike(like));\n    },\n    removeLike: function removeLike(like) {\n      return dispatch(_removeLike(like));\n    },\n    updateLike: function updateLike(like) {\n      return dispatch(_updateLike(like));\n    },\n    addCollection: function addCollection(post) {\n      return dispatch(_addCollection(post));\n    }\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(PostCerdits);","map":{"version":3,"sources":["/home/madan/Documents/workspace/artwork/src/components/projects/projectActs/PostCredits.js"],"names":["React","Component","connect","createLike","removeLike","updateLike","addCollection","getLikes","dataObj","PostCerdits","handleLike","e","likes","props","likeCount","like","state","isLiked","isActive","console","log","setState","likeToPost","project","id","collectedCount","collected","activeStatus","imageUrl","postId","projectId","authorId","auth","uid","then","liked","mapDispatchToProps","dispatch","post"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n// import { firestoreConnect } from 'react-redux-firebase'\n// import { compose } from 'redux'\nimport { connect } from 'react-redux'\nimport { createLike, removeLike, updateLike } from '../../../store/actions/LikeActions'\nimport { addCollection } from '../../../store/actions/AddToCollection'\nimport { getLikes, dataObj } from './../../../utils/getCreditData'\n\nclass PostCerdits extends Component {\n  constructor() {\n    super()\n    this.state = {}\n  }\n\n  componentWillMount(props) {\n    const projectId = this.props.project.id\n    const authorId = this.props.auth.uid\n\n    getLikes(projectId, authorId)\n    .then(() => {\n      this.setState({\n        like: {\n          ...dataObj\n        }\n      }, () => {\n        console.log(\"thisss: \", this.state.like)\n      })\n    })\n  }\n\n  // incrementing like to the post\n  handleLike = (e) => {\n    let likes = this.props.likeCount\n    let like = this.state.like ? this.state.like : null\n    let isLiked = like && like.isActive ? true : false\n    console.log(\"like state: \", like)\n\n    like\n    ? isLiked\n      ? this.setState(() => {\n          return {\n            like: {\n              likeToPost: this.props.project.id,\n              likeCount: likes,\n              id: like.id\n            }\n          }\n        }, () => {\n          console.log(this.state.like)\n          this.props.removeLike(this.state.like)\n        })\n\n      : this.setState(() => {\n          return {\n            like: {\n              likeToPost: this.props.project.id,\n              likeCount: likes,\n              id: like.id,\n              isActive: true\n            }\n          }\n        }, () => {\n          this.props.updateLike(this.state.like)\n        })\n\n    : this.setState(() => {\n        return {\n          like: {\n            likeToPost: this.props.project.id,\n            likeCount: likes,\n            isActive: true\n          }\n        }\n      }, () => {\n        this.props.createLike(this.state.like)\n      })\n  }\n\n  // adding post to user's collection\n  addCollection = () => {\n    let collectedCount = this.props.collected + 1\n    let activeStatus = this.props.isActive ? false : true\n\n    this.setState(() => {\n      return {\n        imageUrl: this.props.project.imageUrl,\n        postId: this.props.project.id,\n        activeStatus,\n        collectedCount\n      }\n    }, () => {\n      this.props.addCollection(this.state)\n    })\n  }\n\n  render() {\n    const { likeCount } = this.props\n    const { like } = this.state\n    const liked = like && like.isActive ? true : false\n    // console.log(\"state: \", this.state)\n\n    return(\n      <div>\n      <div className=\"icons-wrapper\">\n        <div className=\"post-act\">\n          <span className=\"\">\n            <button onClick={this.handleLike}>\n              {liked\n                ? <i className=\"material-icons blue-text\">thumb_up</i>\n                : <i className=\"material-icons\">thumb_up</i>\n              }\n            </button>\n          </span>\n          <span className=\"\">\n          <button>\n            <i className=\"material-icons\">send</i>\n          </button>\n          </span>\n        </div>\n        <div className=\"save\">\n          <span className=\"\">\n            <button onClick={this.addCollection}>\n               <i className=\"material-icons center\"\n                    title=\"add to your collection\">\n                  add_to_photos\n                </i>\n            </button>\n          </span>\n        </div>\n      </div>\n        {likeCount\n          ?\n            <div className=\"counts\">\n              <span className=\"like-count\">\n                {likeCount} likes\n              </span>\n            </div>\n          : null\n        }\n      </div>\n    )\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    createLike: (like) => dispatch(createLike(like)),\n    removeLike: (like) => dispatch(removeLike(like)),\n    updateLike: (like) => dispatch(updateLike(like)),\n    addCollection: (post) => dispatch(addCollection(post))\n  }\n}\n\n\nexport default connect(null, mapDispatchToProps)(PostCerdits)\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _objectSpread from \"/home/madan/Documents/workspace/artwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nexport var allPosts = [];\nexport var getData = function getData() {\n  if (!allPosts.length > 0) {\n    var firestore = firebase.firestore();\n    var atFirstCall = firestore.collection('projects').orderBy('createdAt', 'desc').limit(5);\n    return atFirstCall.get().then(function (documentSnapshots) {\n      // Get the last visible document\n      console.log(\"test\");\n      var lastVisible = documentSnapshots.docs[documentSnapshots.docs.length - 1]; // console.log(\"last\", documentSnapshots);\n\n      documentSnapshots.forEach(function (doc) {\n        var obj = _objectSpread({}, doc.data(), {\n          id: doc.id\n        });\n\n        allPosts.push(obj);\n      }); // Construct a new query starting at this document,\n      // get the next 25 cities.\n      // var next = db.collection(\"cities\")\n      //     .orderBy(\"population\")\n      //     .startAfter(lastVisible)\n      //     .limit(25);\n    }).then(function () {\n      // dispatch({type: 'RETRIEVE_POST', allPosts})\n      console.log(\"this\", allPosts);\n    }).catch(function (error) {\n      // dispatch({type: 'RETRIEVE_POST_ERR',\n      //   error: \"error retrieving content!\"})\n      console.log(\"something went wrong! Please refresh the page\", error);\n    });\n  }\n};","map":{"version":3,"sources":["/home/madan/Documents/workspace/artwork/src/utils/GetSortedPost.js"],"names":["firebase","allPosts","getData","length","firestore","atFirstCall","collection","orderBy","limit","get","then","documentSnapshots","console","log","lastVisible","docs","forEach","doc","obj","data","id","push","catch","error"],"mappings":";AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,oBAAP;AAEA,OAAO,IAAIC,QAAQ,GAAG,EAAf;AACP,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AAC3B,MAAG,CAACD,QAAQ,CAACE,MAAV,GAAmB,CAAtB,EAAyB;AACvB,QAAMC,SAAS,GAAGJ,QAAQ,CAACI,SAAT,EAAlB;AACA,QAAMC,WAAW,GAAGD,SAAS,CAACE,UAAV,CAAqB,UAArB,EACjBC,OADiB,CACT,WADS,EACI,MADJ,EAEjBC,KAFiB,CAEX,CAFW,CAApB;AAIE,WAAOH,WAAW,CAACI,GAAZ,GAAkBC,IAAlB,CAAuB,UAACC,iBAAD,EAAuB;AACnD;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,UAAMC,WAAW,GAAGH,iBAAiB,CAACI,IAAlB,CAAuBJ,iBAAiB,CAACI,IAAlB,CAAuBZ,MAAvB,GAA8B,CAArD,CAApB,CAHmD,CAInD;;AACAQ,MAAAA,iBAAiB,CAACK,OAAlB,CAA0B,UAAAC,GAAG,EAAI;AAC/B,YAAIC,GAAG,qBACFD,GAAG,CAACE,IAAJ,EADE;AAELC,UAAAA,EAAE,EAAEH,GAAG,CAACG;AAFH,UAAP;;AAIAnB,QAAAA,QAAQ,CAACoB,IAAT,CAAcH,GAAd;AACD,OAND,EALmD,CAYnD;AACA;AACA;AACA;AACA;AACA;AAED,KAnBM,EAoBNR,IApBM,CAoBD,YAAM;AACV;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBZ,QAApB;AACD,KAvBM,EAwBNqB,KAxBM,CAwBA,UAAAC,KAAK,EAAI;AACd;AACA;AACAX,MAAAA,OAAO,CAACC,GAAR,CAAY,+CAAZ,EAA6DU,KAA7D;AACD,KA5BM,CAAP;AA6BH;AACF,CArCM","sourcesContent":["import firebase from 'firebase/app'\nimport 'firebase/firestore'\n\nexport var allPosts = []\nexport const getData = () => {\n  if(!allPosts.length > 0) {\n    const firestore = firebase.firestore()\n    const atFirstCall = firestore.collection('projects')\n      .orderBy('createdAt', 'desc')\n      .limit(5)\n\n      return atFirstCall.get().then((documentSnapshots) => {\n        // Get the last visible document\n        console.log(\"test\")\n        const lastVisible = documentSnapshots.docs[documentSnapshots.docs.length-1];\n        // console.log(\"last\", documentSnapshots);\n        documentSnapshots.forEach(doc => {\n          let obj = {\n            ...doc.data(),\n            id: doc.id\n          }\n          allPosts.push(obj)\n        })\n        // Construct a new query starting at this document,\n        // get the next 25 cities.\n        // var next = db.collection(\"cities\")\n        //     .orderBy(\"population\")\n        //     .startAfter(lastVisible)\n        //     .limit(25);\n\n      })\n      .then(() => {\n        // dispatch({type: 'RETRIEVE_POST', allPosts})\n        console.log(\"this\", allPosts)\n      })\n      .catch(error => {\n        // dispatch({type: 'RETRIEVE_POST_ERR',\n        //   error: \"error retrieving content!\"})\n        console.log(\"something went wrong! Please refresh the page\", error)\n      })\n  }\n}\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/madan/Documents/workspace/artwork/src/components/auth/SignIn.js\";\nimport React, { Component } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Navbar from '../layout/Navbar';\nimport { signInAction } from '../../store/actions/AuthActions';\nimport { signInWithGoogle as _signInWithGoogle, addUserAfterGoogleSignIn as _addUserAfterGoogleSignIn } from '../../store/actions/AuthActions';\nimport { Redirect } from 'react-router-dom';\nimport SignInWithProvider from './signInWithProvider';\nimport Intro from '../layout/Intro';\n\nvar SignIn =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignIn, _Component);\n\n  function SignIn() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SignIn);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SignIn)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      email: '',\n      password: ''\n    };\n\n    _this.handleClick = function () {\n      // firebase.auth().onAuthStateChanged(data => {\n      //   console.log(\"data\", data)\n      //     addUserAfterGoogleSignIn()\n      // })\n      _this.props.signInWithGoogle(); //alert(\"hhhh\")\n\n    };\n\n    _this.componentWillMount = function () {\n      // firebase.auth().getRedirectResult().then(data => {\n      //   console.log(\"data\", data)\n      //   this.props.addUserAfterGoogleSignIn()\n      // })\n      firebase.auth().onAuthStateChanged(function (user) {\n        console.log(\"data\", user);\n\n        _this.props.addUserAfterGoogleSignIn();\n      });\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var email = _this.refs.email.value;\n      var password = _this.refs.password.value;\n\n      if (email && password) {\n        _this.setState(function () {\n          return {\n            email: email,\n            password: password\n          };\n        }, function () {\n          _this.props.signIn(_this.state); // passing state to the dispatch method\n\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(SignIn, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          err = _this$props.err,\n          auth = _this$props.auth; // error message\n\n      if (auth.uid) return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"full-cover\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(Intro, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"sign_in-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"sign-in\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"email\",\n        type: \"email\",\n        ref: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"Email\")), React.createElement(\"div\", {\n        className: \"input-field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"password\",\n        type: \"password\",\n        ref: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"Password\")), React.createElement(\"div\", {\n        className: \"input-field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn grey darken-3 z-depth-0 sign-in-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Login\")), React.createElement(SignInWithProvider, {\n        onClick: this.handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \" \", err ? React.createElement(\"p\", {\n        className: \"red-text darken-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, err) : null, \" \"), React.createElement(\"div\", {\n        className: \"ac_forgot\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"Don't have an account?\", React.createElement(Link, {\n        to: \"signup\",\n        className: \"green-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \" SignUp \")), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"forgotpassword\",\n        className: \"blue-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"Forgot Password?\")))))));\n    }\n  }]);\n\n  return SignIn;\n}(Component); // accessing error message from the authReducer\n\n\nvar mapStateToProps = function mapStateToProps(state) {\n  // console.log(state)\n  return {\n    err: state.auth.authStatus,\n    auth: state.firebase.auth\n  };\n}; // calling despatch attaching state\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    signIn: function signIn(creds) {\n      return dispatch(signInAction(creds));\n    },\n    signInWithGoogle: function signInWithGoogle() {\n      return dispatch(_signInWithGoogle());\n    },\n    addUserAfterGoogleSignIn: function addUserAfterGoogleSignIn() {\n      return dispatch(_addUserAfterGoogleSignIn());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn);","map":{"version":3,"sources":["/home/madan/Documents/workspace/artwork/src/components/auth/SignIn.js"],"names":["React","Component","firebase","Link","connect","Navbar","signInAction","signInWithGoogle","addUserAfterGoogleSignIn","Redirect","SignInWithProvider","Intro","SignIn","state","email","password","handleClick","props","componentWillMount","auth","onAuthStateChanged","user","console","log","handleSubmit","e","preventDefault","refs","value","setState","signIn","err","uid","mapStateToProps","authStatus","mapDispatchToProps","dispatch","creds"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport { Link } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport Navbar from '../layout/Navbar'\nimport { signInAction } from '../../store/actions/AuthActions'\nimport { signInWithGoogle, addUserAfterGoogleSignIn } from '../../store/actions/AuthActions'\nimport { Redirect } from 'react-router-dom'\nimport SignInWithProvider from './signInWithProvider'\nimport Intro from '../layout/Intro'\n\nclass SignIn extends Component {\n  state = {\n      email: '',\n      password: ''\n  }\n\n  handleClick = () => {\n    // firebase.auth().onAuthStateChanged(data => {\n    //   console.log(\"data\", data)\n    //     addUserAfterGoogleSignIn()\n    // })\n    this.props.signInWithGoogle()\n    //alert(\"hhhh\")\n  }\n\n  componentWillMount = () => {\n    // firebase.auth().getRedirectResult().then(data => {\n    //   console.log(\"data\", data)\n    //   this.props.addUserAfterGoogleSignIn()\n    // })\n    firebase.auth().onAuthStateChanged(user => {\n      console.log(\"data\", user)\n      this.props.addUserAfterGoogleSignIn()\n    })\n  }\n\n  // changing state on submitting form\n  handleSubmit = (e) => {\n    e.preventDefault()\n    const email = this.refs.email.value\n    const password = this.refs.password.value\n\n    if(email && password) {\n      this.setState(() => {\n        return {\n          email,\n          password\n        }\n      }, () => {\n        this.props.signIn(this.state) // passing state to the dispatch method\n      })\n    }\n  }\n\n  render() {\n    const { err, auth } = this.props // error message\n    if(auth.uid) return <Redirect to='/' />\n    return(\n      <div>\n        <div className=\"full-cover\">\n\n                <Intro />\n\n              <div className=\"sign_in-form\">\n\n                <form className=\"sign-in\" onSubmit={this.handleSubmit}>\n                  <div className=\"input-field\">\n                    <input id=\"email\" type=\"email\" ref=\"email\" />\n                    <label htmlFor=\"email\">Email</label>\n                  </div>\n                  <div className=\"input-field\">\n                    <input id=\"password\" type=\"password\" ref=\"password\" />\n                    <label htmlFor=\"password\">Password</label>\n                  </div>\n                  <div className=\"input-field\">\n                    <button className=\"btn grey darken-3 z-depth-0 sign-in-btn\">Login</button>\n                  </div>\n                    <SignInWithProvider onClick={this.handleClick} />\n                  <div> { err ? <p className=\"red-text darken-5\">{err}</p> : null } </div>\n                  <div className=\"ac_forgot\">\n                    <span>\n                      Don't have an account?\n                      <Link to='signup' className=\"green-text\" > SignUp </Link>\n                    </span>\n                    <span>\n                      <Link\n                        to='forgotpassword'\n                        className=\"blue-text\">\n                        Forgot Password?\n                      </Link>\n                    </span>\n                  </div>\n                </form>\n              </div>\n            </div>\n      </div>\n    )\n  }\n}\n\n// accessing error message from the authReducer\nconst mapStateToProps = (state) => {\n  // console.log(state)\n  return {\n    err: state.auth.authStatus,\n    auth: state.firebase.auth\n  }\n}\n\n// calling despatch attaching state\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    signIn: (creds) => dispatch(signInAction(creds)),\n    signInWithGoogle: () => dispatch(signInWithGoogle()),\n    addUserAfterGoogleSignIn: () => dispatch(addUserAfterGoogleSignIn())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn)\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _objectSpread from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/madan/Documents/workspace/artwork/src/components/profile/Components/Collection.js\";\nimport React, { Component } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport CollectionItem from './CollectionItem';\n\nvar Collection =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Collection, _Component);\n\n  function Collection() {\n    var _this;\n\n    _classCallCheck(this, Collection);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Collection).call(this));\n\n    _this.getCollection = function () {\n      var uid = _this.props.auth.uid;\n      var db = firebase.firestore();\n      console.log(\"uid\", uid); // getting posts of \"folowing users\"\n\n      return db.collection('users').doc(uid).collection('collection').orderBy('time', 'desc').limit(10).get().then(function (documentSnapshots) {\n        // getting the last visible document for pagination\n        _this.lastVisible = documentSnapshots.docs[documentSnapshots.docs.length - 1];\n        documentSnapshots.forEach(function (docs) {\n          var obj = _objectSpread({}, docs.data(), {\n            id: docs.id\n          });\n\n          _this.collection.push(obj);\n\n          _this.setState(function () {\n            return {\n              collection: _this.collection\n            };\n          }, function () {\n            console.log(\"collection: \", _this.state);\n          });\n        });\n      });\n    };\n\n    _this.collection = [];\n    _this.lastVisible = '';\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(Collection, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.getCollection();\n    } // renewPost = () => {\n    //   const db = firebase.firestore()\n    //   const lastVisible = this.lastVisible ? this.lastVisible : false\n    //\n    //   if(this.lastVisible) {\n    //     return db.collection('projects')\n    //       .orderBy('createdAt', 'desc')\n    //       .startAfter(lastVisible)\n    //       .limit(5)\n    //       .get().then(documentSnapshots => {\n    //\n    //         // getting the last visible document for pagination\n    //         this.lastVisible = documentSnapshots.docs[documentSnapshots.docs.length-1]\n    //\n    //         documentSnapshots.forEach((docs) => {\n    //           let obj = {\n    //             ...docs.data(),\n    //             id: docs.id\n    //           }\n    //           this.post.push(obj)\n    //           this.setState(() => {\n    //             return {\n    //               posts: this.post\n    //             }\n    //           })\n    //         })\n    //       })\n    //   }\n    // }\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var art = this.state.collection ? this.state.collection : null;\n      console.log(\"art: \", this.state.collection);\n      return React.createElement(\"div\", {\n        className: \"section\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, art && art.map(function (art) {\n        return React.createElement(\"div\", {\n          className: \"card z-depth-0 white\",\n          key: art.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, React.createElement(CollectionItem, {\n          art: art,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }));\n      }));\n    }\n  }]);\n\n  return Collection;\n}(Component);\n\nexport default Collection;","map":{"version":3,"sources":["/home/madan/Documents/workspace/artwork/src/components/profile/Components/Collection.js"],"names":["React","Component","firebase","CollectionItem","Collection","getCollection","uid","props","auth","db","firestore","console","log","collection","doc","orderBy","limit","get","then","documentSnapshots","lastVisible","docs","length","forEach","obj","data","id","push","setState","state","art","map"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,oBAAP;AACA,OAAOC,cAAP,MAA2B,kBAA3B;;IAEMC,U;;;;;AACJ,wBAAc;AAAA;;AAAA;;AACZ;;AADY,UA2CdC,aA3Cc,GA2CE,YAAM;AACpB,UAAMC,GAAG,GAAG,MAAKC,KAAL,CAAWC,IAAX,CAAgBF,GAA5B;AAEA,UAAMG,EAAE,GAAGP,QAAQ,CAACQ,SAAT,EAAX;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBN,GAAnB,EAJoB,CAKpB;;AACA,aAAOG,EAAE,CAACI,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BR,GAA3B,EACJO,UADI,CACO,YADP,EAEJE,OAFI,CAEI,MAFJ,EAEY,MAFZ,EAGJC,KAHI,CAGE,EAHF,EAIJC,GAJI,GAIEC,IAJF,CAIO,UAAAC,iBAAiB,EAAI;AAE/B;AACA,cAAKC,WAAL,GAAmBD,iBAAiB,CAACE,IAAlB,CAAuBF,iBAAiB,CAACE,IAAlB,CAAuBC,MAAvB,GAA8B,CAArD,CAAnB;AAEAH,QAAAA,iBAAiB,CAACI,OAAlB,CAA0B,UAACF,IAAD,EAAU;AAClC,cAAIG,GAAG,qBACFH,IAAI,CAACI,IAAL,EADE;AAELC,YAAAA,EAAE,EAAEL,IAAI,CAACK;AAFJ,YAAP;;AAIA,gBAAKb,UAAL,CAAgBc,IAAhB,CAAqBH,GAArB;;AACA,gBAAKI,QAAL,CAAc,YAAM;AAClB,mBAAO;AACLf,cAAAA,UAAU,EAAE,MAAKA;AADZ,aAAP;AAGD,WAJD,EAIG,YAAM;AACPF,YAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4B,MAAKiB,KAAjC;AACD,WAND;AAOD,SAbD;AAcD,OAvBI,CAAP;AAwBC,KAzEW;;AAEZ,UAAKhB,UAAL,GAAkB,EAAlB;AACA,UAAKO,WAAL,GAAmB,EAAnB;AACA,UAAKS,KAAL,GAAa,EAAb;AAJY;AAOb;;;;yCAEoB;AACnB,WAAKxB,aAAL;AACD,K,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;6BAkCS;AACP,UAAMyB,GAAG,GAAG,KAAKD,KAAL,CAAWhB,UAAX,GAAwB,KAAKgB,KAAL,CAAWhB,UAAnC,GAAgD,IAA5D;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB,KAAKiB,KAAL,CAAWhB,UAAhC;AACA,aACE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACIiB,GAAG,IAAIA,GAAG,CAACC,GAAJ,CAAQ,UAAAD,GAAG,EAAI;AACtB,eACE;AAAK,UAAA,SAAS,EAAC,sBAAf;AAAsC,UAAA,GAAG,EAAEA,GAAG,CAACJ,EAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,cAAD;AAAgB,UAAA,GAAG,EAAEI,GAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CADF;AAKD,OANQ,CADX,CADF;AAWD;;;;EA1FsB7B,S;;AA6FzB,eAAeG,UAAf","sourcesContent":["import React, { Component } from 'react'\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport CollectionItem from './CollectionItem'\n\nclass Collection extends Component {\n  constructor() {\n    super()\n    this.collection = []\n    this.lastVisible = ''\n    this.state = {\n\n    }\n  }\n\n  componentWillMount() {\n    this.getCollection()\n  }\n\n  // renewPost = () => {\n  //   const db = firebase.firestore()\n  //   const lastVisible = this.lastVisible ? this.lastVisible : false\n  //\n  //   if(this.lastVisible) {\n  //     return db.collection('projects')\n  //       .orderBy('createdAt', 'desc')\n  //       .startAfter(lastVisible)\n  //       .limit(5)\n  //       .get().then(documentSnapshots => {\n  //\n  //         // getting the last visible document for pagination\n  //         this.lastVisible = documentSnapshots.docs[documentSnapshots.docs.length-1]\n  //\n  //         documentSnapshots.forEach((docs) => {\n  //           let obj = {\n  //             ...docs.data(),\n  //             id: docs.id\n  //           }\n  //           this.post.push(obj)\n  //           this.setState(() => {\n  //             return {\n  //               posts: this.post\n  //             }\n  //           })\n  //         })\n  //       })\n  //   }\n  // }\n\n  getCollection = () => {\n    const uid = this.props.auth.uid\n\n    const db = firebase.firestore()\n    console.log(\"uid\", uid)\n    // getting posts of \"folowing users\"\n    return db.collection('users').doc(uid)\n      .collection('collection')\n      .orderBy('time', 'desc')\n      .limit(10)\n      .get().then(documentSnapshots => {\n\n        // getting the last visible document for pagination\n        this.lastVisible = documentSnapshots.docs[documentSnapshots.docs.length-1]\n\n        documentSnapshots.forEach((docs) => {\n          let obj = {\n            ...docs.data(),\n            id: docs.id\n          }\n          this.collection.push(obj)\n          this.setState(() => {\n            return {\n              collection: this.collection\n            }\n          }, () => {\n            console.log(\"collection: \", this.state)\n          })\n        })\n      })\n    }\n\n  render() {\n    const art = this.state.collection ? this.state.collection : null\n    console.log(\"art: \", this.state.collection)\n    return (\n      <div className=\"section\">\n        { art && art.map(art => {\n          return (\n            <div className=\"card z-depth-0 white\" key={art.id}>\n              <CollectionItem art={art} />\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n}\n\nexport default Collection\n"]},"metadata":{},"sourceType":"module"}
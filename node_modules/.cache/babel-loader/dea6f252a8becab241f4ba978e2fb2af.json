{"ast":null,"code":"import _objectSpread from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/madan/Documents/workspace/artwork/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/madan/Documents/workspace/artwork/src/components/profile/Components/Collection.js\";\nimport React, { Component } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\n\nvar Collection =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Collection, _Component);\n\n  function Collection() {\n    var _this;\n\n    _classCallCheck(this, Collection);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Collection).call(this));\n\n    _this.renewPost = function () {\n      var db = firebase.firestore();\n      var lastVisible = _this.lastVisible ? _this.lastVisible : false;\n\n      if (_this.lastVisible) {\n        return db.collection('projects').orderBy('createdAt', 'desc').startAfter(lastVisible).limit(5).get().then(function (documentSnapshots) {\n          // getting the last visible document for pagination\n          _this.lastVisible = documentSnapshots.docs[documentSnapshots.docs.length - 1];\n          documentSnapshots.forEach(function (docs) {\n            var obj = _objectSpread({}, docs.data(), {\n              id: docs.id\n            });\n\n            _this.post.push(obj);\n\n            _this.setState(function () {\n              return {\n                posts: _this.post\n              };\n            });\n          });\n        });\n      }\n    };\n\n    _this.getPosts = function () {\n      var uid = _this.props.auth.uid;\n      var db = firebase.firestore(); // getting posts of \"folowing users\"\n\n      return db.collection('users').doc(uid).collection('collection').orderBy('time', 'desc').limit(10).get().then(function (documentSnapshots) {\n        // getting the last visible document for pagination\n        _this.lastVisible = documentSnapshots.docs[documentSnapshots.docs.length - 1];\n        documentSnapshots.forEach(function (docs) {\n          var obj = _objectSpread({}, docs.data(), {\n            id: docs.id\n          });\n\n          _this.collection.push(obj);\n\n          _this.setState(function () {\n            return {\n              posts: _this.post\n            };\n          });\n        });\n      });\n    };\n\n    _this.collection = [];\n    _this.lastVisible = '';\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(Collection, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.getCollection();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Collection;\n}(Component);\n\nexport default Collection;","map":{"version":3,"sources":["/home/madan/Documents/workspace/artwork/src/components/profile/Components/Collection.js"],"names":["React","Component","firebase","Collection","renewPost","db","firestore","lastVisible","collection","orderBy","startAfter","limit","get","then","documentSnapshots","docs","length","forEach","obj","data","id","post","push","setState","posts","getPosts","uid","props","auth","doc","state","getCollection"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,oBAAP;;IAEMC,U;;;;;AACJ,wBAAc;AAAA;;AAAA;;AACZ;;AADY,UAadC,SAbc,GAaF,YAAM;AAChB,UAAMC,EAAE,GAAGH,QAAQ,CAACI,SAAT,EAAX;AACA,UAAMC,WAAW,GAAG,MAAKA,WAAL,GAAmB,MAAKA,WAAxB,GAAsC,KAA1D;;AAEA,UAAG,MAAKA,WAAR,EAAqB;AACnB,eAAOF,EAAE,CAACG,UAAH,CAAc,UAAd,EACJC,OADI,CACI,WADJ,EACiB,MADjB,EAEJC,UAFI,CAEOH,WAFP,EAGJI,KAHI,CAGE,CAHF,EAIJC,GAJI,GAIEC,IAJF,CAIO,UAAAC,iBAAiB,EAAI;AAE/B;AACA,gBAAKP,WAAL,GAAmBO,iBAAiB,CAACC,IAAlB,CAAuBD,iBAAiB,CAACC,IAAlB,CAAuBC,MAAvB,GAA8B,CAArD,CAAnB;AAEAF,UAAAA,iBAAiB,CAACG,OAAlB,CAA0B,UAACF,IAAD,EAAU;AAClC,gBAAIG,GAAG,qBACFH,IAAI,CAACI,IAAL,EADE;AAELC,cAAAA,EAAE,EAAEL,IAAI,CAACK;AAFJ,cAAP;;AAIA,kBAAKC,IAAL,CAAUC,IAAV,CAAeJ,GAAf;;AACA,kBAAKK,QAAL,CAAc,YAAM;AAClB,qBAAO;AACLC,gBAAAA,KAAK,EAAE,MAAKH;AADP,eAAP;AAGD,aAJD;AAKD,WAXD;AAYD,SArBI,CAAP;AAsBD;AACF,KAzCa;;AAAA,UA2CdI,QA3Cc,GA2CH,YAAM;AACf,UAAMC,GAAG,GAAG,MAAKC,KAAL,CAAWC,IAAX,CAAgBF,GAA5B;AAEA,UAAMrB,EAAE,GAAGH,QAAQ,CAACI,SAAT,EAAX,CAHe,CAKf;;AACA,aAAOD,EAAE,CAACG,UAAH,CAAc,OAAd,EAAuBqB,GAAvB,CAA2BH,GAA3B,EACJlB,UADI,CACO,YADP,EAEJC,OAFI,CAEI,MAFJ,EAEY,MAFZ,EAGJE,KAHI,CAGE,EAHF,EAIJC,GAJI,GAIEC,IAJF,CAIO,UAAAC,iBAAiB,EAAI;AAE/B;AACA,cAAKP,WAAL,GAAmBO,iBAAiB,CAACC,IAAlB,CAAuBD,iBAAiB,CAACC,IAAlB,CAAuBC,MAAvB,GAA8B,CAArD,CAAnB;AAEAF,QAAAA,iBAAiB,CAACG,OAAlB,CAA0B,UAACF,IAAD,EAAU;AAClC,cAAIG,GAAG,qBACFH,IAAI,CAACI,IAAL,EADE;AAELC,YAAAA,EAAE,EAAEL,IAAI,CAACK;AAFJ,YAAP;;AAIA,gBAAKZ,UAAL,CAAgBc,IAAhB,CAAqBJ,GAArB;;AACA,gBAAKK,QAAL,CAAc,YAAM;AAClB,mBAAO;AACLC,cAAAA,KAAK,EAAE,MAAKH;AADP,aAAP;AAGD,WAJD;AAKD,SAXD;AAYD,OArBI,CAAP;AAsBC,KAvEW;;AAEZ,UAAKb,UAAL,GAAkB,EAAlB;AACA,UAAKD,WAAL,GAAmB,EAAnB;AACA,UAAKuB,KAAL,GAAa,EAAb;AAJY;AAOb;;;;yCAEoB;AACnB,WAAKC,aAAL;AACD;;;6BA8DQ;AACP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAKD;;;;EAhFsB9B,S;;AAmFzB,eAAeE,UAAf","sourcesContent":["import React, { Component } from 'react'\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\n\nclass Collection extends Component {\n  constructor() {\n    super()\n    this.collection = []\n    this.lastVisible = ''\n    this.state = {\n\n    }\n  }\n\n  componentWillMount() {\n    this.getCollection()\n  }\n\n  renewPost = () => {\n    const db = firebase.firestore()\n    const lastVisible = this.lastVisible ? this.lastVisible : false\n\n    if(this.lastVisible) {\n      return db.collection('projects')\n        .orderBy('createdAt', 'desc')\n        .startAfter(lastVisible)\n        .limit(5)\n        .get().then(documentSnapshots => {\n\n          // getting the last visible document for pagination\n          this.lastVisible = documentSnapshots.docs[documentSnapshots.docs.length-1]\n\n          documentSnapshots.forEach((docs) => {\n            let obj = {\n              ...docs.data(),\n              id: docs.id\n            }\n            this.post.push(obj)\n            this.setState(() => {\n              return {\n                posts: this.post\n              }\n            })\n          })\n        })\n    }\n  }\n\n  getPosts = () => {\n    const uid = this.props.auth.uid\n\n    const db = firebase.firestore()\n\n    // getting posts of \"folowing users\"\n    return db.collection('users').doc(uid)\n      .collection('collection')\n      .orderBy('time', 'desc')\n      .limit(10)\n      .get().then(documentSnapshots => {\n\n        // getting the last visible document for pagination\n        this.lastVisible = documentSnapshots.docs[documentSnapshots.docs.length-1]\n\n        documentSnapshots.forEach((docs) => {\n          let obj = {\n            ...docs.data(),\n            id: docs.id\n          }\n          this.collection.push(obj)\n          this.setState(() => {\n            return {\n              posts: this.post\n            }\n          })\n        })\n      })\n    }\n\n  render() {\n    return (\n      <div>\n\n      </div>\n    )\n  }\n}\n\nexport default Collection\n"]},"metadata":{},"sourceType":"module"}
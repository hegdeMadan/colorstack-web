{"ast":null,"code":"export var createProject = function createProject(project) {\n  return function (dispatch, getState, _ref) {\n    var getFirebase = _ref.getFirebase,\n        getFirestore = _ref.getFirestore;\n    // adding data to firestore\n    var firestore = getFirestore();\n    var profile = getState().firebase.profile; // retreiving user profile info\n\n    var userId = getState().firebase.auth.uid; // accessing user's user ID\n\n    var category = project.type ? project.type : 'other'; // adding data to firestore collection named 'projects'\n\n    firestore.collection('projects').add({\n      content: project.content,\n      imageUrl: project.imageUrl,\n      authorFirstName: profile.firstName,\n      authorSecondName: profile.lastName,\n      authorId: userId,\n      category: category,\n      createdAt: new Date()\n    }).then(function () {\n      dispatch({\n        type: 'CREATE_PROJECT',\n        project: project\n      });\n    }).catch(function (err) {\n      dispatch({\n        type: 'CREATE_PROJECT_ERR',\n        err: err\n      });\n    });\n  };\n};\nexport var createAlbum = function createAlbum(album) {\n  return function (dispatch, getState, _ref2) {\n    var getFirebase = _ref2.getFirebase,\n        getFirestore = _ref2.getFirestore;\n    console.log(\"createAlbum: \", album);\n    var firestore = getFirestore();\n    var firebase = getFirebase();\n    var profile = getState().firebase.profile;\n    var userId = getState().firebase.auth.uid; // accessing user's user ID\n\n    var imageUrl = album.imageUrl ? album.imageUrl : null;\n\n    if (album.albumId) {\n      console.log(\"isAlbumId: \", album);\n      firestore.collection('albums').doc(album.albumId).update({\n        photos: firebase.firestore.FieldValue.arrayUnion(album.imageUrl)\n      }).then(function () {\n        dispatch({\n          type: 'CREATE_PROJECT',\n          album: album\n        });\n      }).catch(function (err) {\n        dispatch({\n          type: 'CREATE_PROJECT_ERR',\n          err: err\n        });\n      });\n    } else if (imageUrl) {\n      console.log(\"isNewAlbum: \", album);\n      firestore.collection('albums').add({\n        authorFirstName: profile.firstName,\n        authorLastName: profile.lastName,\n        authorId: userId,\n        albumName: album.albumName,\n        content: album.content,\n        authorProfilePicture: album.imageUrl,\n        time: new Date()\n      }).then(function () {\n        dispatch({\n          type: 'CREATE_PROJECT',\n          album: album\n        });\n      }).catch(function (err) {\n        dispatch({\n          type: 'CREATE_PROJECT_ERR',\n          err: err\n        });\n      });\n    }\n  };\n};","map":{"version":3,"sources":["/home/madan/Documents/workspace/artwork/src/store/actions/ProjectActions.js"],"names":["createProject","project","dispatch","getState","getFirebase","getFirestore","firestore","profile","firebase","userId","auth","uid","category","type","collection","add","content","imageUrl","authorFirstName","firstName","authorSecondName","lastName","authorId","createdAt","Date","then","catch","err","createAlbum","album","console","log","albumId","doc","update","photos","FieldValue","arrayUnion","authorLastName","albumName","authorProfilePicture","time"],"mappings":"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","sourcesContent":["export const createProject = (project) => {\n  return (dispatch, getState , { getFirebase, getFirestore }) => {\n\n    // adding data to firestore\n    const firestore = getFirestore()\n    const profile = getState().firebase.profile // retreiving user profile info\n    const userId = getState().firebase.auth.uid // accessing user's user ID\n    const category = project.type ? project.type : 'other'\n\n    // adding data to firestore collection named 'projects'\n    firestore.collection('projects').add({\n      content: project.content,\n      imageUrl: project.imageUrl,\n      authorFirstName: profile.firstName,\n      authorSecondName: profile.lastName,\n      authorId: userId,\n      category,\n      createdAt: new Date()\n    })\n    .then(() => {\n      dispatch({type:'CREATE_PROJECT', project })\n    })\n    .catch((err) => {\n      dispatch({type:'CREATE_PROJECT_ERR', err })\n    })\n  }\n}\n\nexport const createAlbum = (album) => {\n  return (dispatch, getState, { getFirebase, getFirestore}) => {\n\n    console.log(\"createAlbum: \", album)\n    const firestore = getFirestore()\n    const firebase = getFirebase()\n    const profile = getState().firebase.profile\n    const userId = getState().firebase.auth.uid // accessing user's user ID\n    const imageUrl = album.imageUrl ? album.imageUrl : null\n\n    if(album.albumId) {\n      console.log(\"isAlbumId: \", album)\n      firestore.collection('albums')\n        .doc(album.albumId)\n        .update({\n          photos: firebase.firestore.FieldValue.arrayUnion(album.imageUrl)\n        })\n        .then(() => {\n          dispatch({type:'CREATE_PROJECT', album })\n        })\n        .catch((err) => {\n          dispatch({type:'CREATE_PROJECT_ERR', err })\n        })\n\n    } else if(imageUrl) {\n      console.log(\"isNewAlbum: \", album)\n      firestore.collection('albums').add({\n        authorFirstName: profile.firstName,\n        authorLastName: profile.lastName,\n        authorId: userId,\n        albumName: album.albumName,\n        content: album.content,\n        authorProfilePicture: album.imageUrl,\n        time: new Date()\n      })\n      .then(() => {\n        dispatch({type:'CREATE_PROJECT', album })\n      })\n      .catch((err) => {\n        dispatch({type:'CREATE_PROJECT_ERR', err })\n      })\n\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}
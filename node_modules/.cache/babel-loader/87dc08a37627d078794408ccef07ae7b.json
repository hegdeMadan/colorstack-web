{"ast":null,"code":"import _objectSpread from \"/home/madan/Documents/workspace/artwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nexport var getData = function getData() {\n  console.log(\"test\");\n  return function (dispatch, _ref) {\n    var getFirestore = _ref.getFirestore;\n    var firestore = getFirestore();\n    var atFirstCall = firestore.collection('projects').orderBy('createdAt').limit(15);\n    var allPosts = [];\n    return atFirstCall.get().then(function (documentSnapshots) {\n      // Get the last visible document\n      console.log(\"test\");\n      var lastVisible = documentSnapshots.docs[documentSnapshots.docs.length - 1]; // console.log(\"last\", documentSnapshots);\n\n      documentSnapshots.forEach(function (doc) {\n        var obj = _objectSpread({}, doc.data(), {\n          id: doc.id\n        });\n\n        allPosts.push(obj);\n      }); // Construct a new query starting at this document,\n      // get the next 25 cities.\n      // var next = db.collection(\"cities\")\n      //     .orderBy(\"population\")\n      //     .startAfter(lastVisible)\n      //     .limit(25);\n    }).then(function () {\n      console.log(allPosts);\n      dispatch({\n        type: 'RETRIEVE_POST',\n        allPosts: allPosts\n      });\n    }).catch(function (error) {\n      dispatch({\n        type: 'RETRIEVE_POST_ERR',\n        error: error\n      });\n      console.log(\"something went wrong! Please refresh the page\", error);\n    });\n  };\n};","map":{"version":3,"sources":["/home/madan/Documents/workspace/artwork/src/utils/GetSortedPost.js"],"names":["getData","console","log","dispatch","getFirestore","firestore","atFirstCall","collection","orderBy","limit","allPosts","get","then","documentSnapshots","lastVisible","docs","length","forEach","doc","obj","data","id","push","type","catch","error"],"mappings":";AAAA,OAAO,IAAMA,OAAO,GAAG,SAAVA,OAAU,GAAM;AAC3BC,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,SAAM,UAACC,QAAD,QAAgC;AAAA,QAAnBC,YAAmB,QAAnBA,YAAmB;AACpC,QAAMC,SAAS,GAAGD,YAAY,EAA9B;AACA,QAAME,WAAW,GAAGD,SAAS,CAACE,UAAV,CAAqB,UAArB,EACjBC,OADiB,CACT,WADS,EAEjBC,KAFiB,CAEX,EAFW,CAApB;AAGA,QAAIC,QAAQ,GAAG,EAAf;AAEE,WAAOJ,WAAW,CAACK,GAAZ,GAAkBC,IAAlB,CAAuB,UAACC,iBAAD,EAAuB;AACnD;AACAZ,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,UAAIY,WAAW,GAAGD,iBAAiB,CAACE,IAAlB,CAAuBF,iBAAiB,CAACE,IAAlB,CAAuBC,MAAvB,GAA8B,CAArD,CAAlB,CAHmD,CAInD;;AACAH,MAAAA,iBAAiB,CAACI,OAAlB,CAA0B,UAAAC,GAAG,EAAI;AAC/B,YAAIC,GAAG,qBACFD,GAAG,CAACE,IAAJ,EADE;AAELC,UAAAA,EAAE,EAAEH,GAAG,CAACG;AAFH,UAAP;;AAIAX,QAAAA,QAAQ,CAACY,IAAT,CAAcH,GAAd;AACD,OAND,EALmD,CAYnD;AACA;AACA;AACA;AACA;AACA;AAED,KAnBM,EAoBNP,IApBM,CAoBD,YAAM;AACVX,MAAAA,OAAO,CAACC,GAAR,CAAYQ,QAAZ;AACAP,MAAAA,QAAQ,CAAC;AAAEoB,QAAAA,IAAI,EAAE,eAAR;AAAyBb,QAAAA,QAAQ,EAARA;AAAzB,OAAD,CAAR;AACD,KAvBM,EAwBNc,KAxBM,CAwBA,UAAAC,KAAK,EAAI;AACdtB,MAAAA,QAAQ,CAAC;AAAEoB,QAAAA,IAAI,EAAE,mBAAR;AAA6BE,QAAAA,KAAK,EAALA;AAA7B,OAAD,CAAR;AACAxB,MAAAA,OAAO,CAACC,GAAR,CAAY,+CAAZ,EAA6DuB,KAA7D;AACD,KA3BM,CAAP;AA4BH,GAnCD;AAoCD,CAtCM","sourcesContent":["export const getData = () => {\n  console.log(\"test\")\n  return(dispatch, { getFirestore }) => {\n    const firestore = getFirestore()\n    const atFirstCall = firestore.collection('projects')\n      .orderBy('createdAt')\n      .limit(15)\n    var allPosts = []\n\n      return atFirstCall.get().then((documentSnapshots) => {\n        // Get the last visible document\n        console.log(\"test\")\n        var lastVisible = documentSnapshots.docs[documentSnapshots.docs.length-1];\n        // console.log(\"last\", documentSnapshots);\n        documentSnapshots.forEach(doc => {\n          let obj = {\n            ...doc.data(),\n            id: doc.id\n          }\n          allPosts.push(obj)\n        })\n        // Construct a new query starting at this document,\n        // get the next 25 cities.\n        // var next = db.collection(\"cities\")\n        //     .orderBy(\"population\")\n        //     .startAfter(lastVisible)\n        //     .limit(25);\n\n      })\n      .then(() => {\n        console.log(allPosts)\n        dispatch({ type: 'RETRIEVE_POST', allPosts })\n      })\n      .catch(error => {\n        dispatch({ type: 'RETRIEVE_POST_ERR', error })\n        console.log(\"something went wrong! Please refresh the page\", error)\n      })\n  }\n}\n"]},"metadata":{},"sourceType":"module"}